<div class="container">
  <div class="card mb-3" *ngIf="newUser">
    <div class="card-header">
      <button type="button" class="btn btn-default float-right" (click)="newUser = null">Close</button>
      Create User
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label>First name</label>
            <input type="text" [(ngModel)]="newUser.first_name" class="form-control">
          </div>
          <div class="form-group">
            <label>Last name</label>
            <input type="text" [(ngModel)]="newUser.last_name" class="form-control">
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" [(ngModel)]="newUser.password" class="form-control">
          </div>
          <div class="form-group">
            <label>Password confirmation</label>
            <input type="password" [(ngModel)]="newUser.password_confirmation" class="form-control">
          </div>

        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label>Email</label>
            <input type="email" [(ngModel)]="newUser.email" class="form-control">
          </div>
          <div class="form-group">
            <label>Document</label>
            <input type="number" [(ngModel)]="newUser.document" class="form-control">
          </div>
          <div class="form-group">
            <label>Phone</label>
            <input type="text" [(ngModel)]="newUser.phone" class="form-control">
          </div>
          <div class="form-group">
            <button type="button" class="btn btn-primary" (click)="createUser()">Create</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card mb-3" *ngIf="user">
    <div class="card-header">
      <button type="button" class="btn btn-default float-right" (click)="user = null">Close</button>
      User: {{ user.first_name + ' ' + user.last_name }}
    </div>
    <div class="card-body">
      <table class="table table-striped">
        <tr>
          <th>id</th>
          <td>{{ user.id }}</td>
          <th>document</th>
          <td>{{ user.document }}</td>
        </tr>
        <tr>
          <th>First name</th>
          <td>{{ user.first_name }}</td>
          <th>Last name</th>
          <td>{{ user.last_name }}</td>
        </tr>
        <tr>
          <th>Email</th>
          <td>{{ user.email }}</td>
          <th>Phone</th>
          <td>{{ user.phone }}</td>
        </tr>
        <tr>
          <th>Created at</th>
          <td>{{ user.created_at }}</td>
          <th></th>
          <td>
            <p class="text-secondary" *ngIf="user.hotels.length > 0">Remove all hotels before delete user</p>
            <button *ngIf="user.hotels.length == 0" class="btn btn-danger" (click)="deleteUser(user.id)">Delete</button>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <div class="card mb-3">
    <div class="card-header">
      <button type="button" class="btn btn-primary float-right" (click)="newUser = {}">Create User</button>
      <button type="button" class="btn btn-default float-right" (click)="getUsers()">Reload users</button>
      Get Users
    </div>
    <div class="card-body">
      <table class="table table-striped">
        <tr>
          <th>id</th>
          <th>Name</th>
          <th>Document</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Hotels</th>
          <th>Created At</th>
          <th></th>
        </tr>
        <tr *ngFor="let user of users">
          <td>{{ user.id }}</td>
          <td>{{ user.first_name + ' ' + user.last_name }}</td>
          <td>{{ user.document }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.phone }}</td>
          <td>{{ user.hotels.length }}</td>
          <td>{{ user.created_at }}</td>
          <td><button class="btn btn-success" (click)="getUser(user.id)">Details</button></td>
        </tr>
        <tr *ngIf="users.length == 0">
          <td colspan="7" class="text-center">Loading</td>
        </tr>
      </table>
    </div>
  </div>
</div>
